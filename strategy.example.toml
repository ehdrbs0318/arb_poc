# Z-Score 차익거래 전략 설정 템플릿
#
# 이 파일을 strategy.toml로 복사하여 사용하세요:
#   cp strategy.example.toml strategy.toml
#
# 실행:
#   cargo run --example zscore_monitor
#   RUST_LOG=debug cargo run --example zscore_monitor

[zscore]
# ── 기본 전략 파라미터 ──────────────────────────────────

# 대상 코인 목록 (auto_select=false일 때 사용)
coins = ["BTC", "ETH", "XRP"]

# 캔들 윈도우 크기 (1분봉 기준, 기본값: 1440 = 1일)
# 가이드라인: 최적 윈도우 = 추정 half-life의 3~5배
window_size = 1440

# Z-Score 진입 임계값 (기본값: 2.0)
entry_z_threshold = 2.0

# Z-Score 청산 임계값 (기본값: 0.5)
exit_z_threshold = 0.5

# 총 자본금 (USDT, 양 거래소 합산)
total_capital_usdt = 10000.0

# Z-Score 계산 시 최소 stddev 임계값 (기본값: 0.01)
min_stddev_threshold = 0.01

# ── 수수료/레버리지 ─────────────────────────────────────

# Upbit taker 수수료율 (기본값: 0.0005 = 0.05%)
# upbit_taker_fee = 0.0005

# Bybit linear taker 수수료율 (기본값: 0.00055 = 0.055%)
# bybit_taker_fee = 0.00055

# Bybit 레버리지 (기본값: 1)
# leverage = 1

# Bybit maintenance margin rate (기본값: 0.005 = 0.5%)
# bybit_mmr = 0.005

# ── 오더북 기반 동적 포지션 사이징 (spec/0006) ──────────

# 코인 페어당 최대 포지션 크기 비율 (기본값: 0.2 = 총 자본의 20%)
max_position_ratio = 0.2

# TTL 초과 후 분할 청산 유예 기간 (시간, 기본값: 4)
# 1단계: TTL 만료 → 오더북 기반 분할 청산 시도
# 2단계: TTL + grace_period → 강제 전량 청산
grace_period_hours = 4

# 같은 코인에 대한 재진입 최소 간격 (초, 기본값: 10)
entry_cooldown_sec = 10

# 오더북 캐시 최대 유효 시간 (초, 기본값: 5)
max_cache_age_sec = 5

# 최대 동시 포지션 수 (생략 시 코인 수만큼 허용)
# max_concurrent_positions = 3

# ── 자동 코인 선택 ──────────────────────────────────────

# true이면 거래량/변동성 기반으로 감시 코인을 자동 선택합니다.
# coins 목록은 무시됩니다.
auto_select = true

# 최대 감시 코인 수 (기본값: 5)
max_coins = 3

# 재선택 주기 (분, 기본값: 10)
reselect_interval_min = 10

# 1시간 최소 거래량 필터 (USDT, 기본값: 50000)
min_volume_1h_usdt = 50000.0

# 코인 선택 시 최대 스프레드 stddev (기본값: 0.5)
# stddev가 이 값을 초과하면 z-score 기반 진입이 어려워 자동 제외
# 0.0이면 필터 비활성화
max_spread_stddev = 0.5

# 제외 코인 블랙리스트 (스테이블코인은 자동 제외)
blacklist = []

# 탈락 코인 포지션 최대 유지 시간 (기본값: 24시간)
# TTL 만료 시 강제 청산합니다.
position_ttl_hours = 24

# ── 세션 출력 ───────────────────────────────────────────

[output]
# 세션 출력 활성화 (기본값: true)
enabled = true
# 출력 디렉토리 (기본값: "output", 하위에 타임스탬프 폴더 생성)
dir = "output"
